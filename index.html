<!DOCTYPE html>
<html>
  <head><meta name="generator" content="Hexo 3.9.0">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=yes">
  
  
  <title>  Qinli </title>

 
  
    <link rel="icon" href="/images/favicon.png">
  


  <link rel="stylesheet" href="/nayo.min.css"> 
</head>  
  <body>   
    
      <header class="header-wrapper">

  <nav class="inner">
    <div class="title">
      <a href="/">
        <img class="logo" src="/images/logo.png">
      </a>
    </div>

    <ul class="menu">
      
      
      <li class="item">
        <a class="link" id="menu-home" href="/">
          <i class="iconfont icon-home">
        </i></a>
      </li>
      
      
      
      <li class="item">
        <a class="link" id="menu-archives" href="/archives">
          <i class="iconfont icon-archives">
        </i></a>
      </li>
      
      
      
      <li class="item">
        <a class="link" id="menu-tags" href="/tags">
          <i class="iconfont icon-tags">
        </i></a>
      </li>
      
      
      
      <li class="item">
        <a class="link" id="menu-about" href="/about">
          <i class="iconfont icon-about">
        </i></a>
      </li>
      
      
      
      <li class="item">
        <a class="link" id="menu-search">
          <i class="iconfont icon-search">
        </i></a>
        

        
      
    </li></ul>
  </nav>
</header>

<header class="mobile-header-wrapper">
  <i id="mobile-toggle" class="iconfont icon-menu mobile-toggle"></i>
</header>   

      <div class="container">       
          
          
            <div class="container-inner">  
          

          


<div class="index slideDownMin">
	

	<div class="profile">

		<img class="avatar" src="/images/avatar.jpg">

		<p class="author">Qinli</p>

		<div class="social">
			
			
			<a target="_blank" class="links" href="https://github.com/bigboomclap">
				<i class="iconfont icon-Github">
			</i></a>
			
			
			<a target="_blank" class="links" href="1341588615">
				<i class="iconfont icon-QQ">
			</i></a>
			
			
			<a target="_blank" class="links" href="/">
				<i class="iconfont icon-Telegram">
			</i></a>
			
			
		</div>
	</div>


	

	
	
	

<article class="article">		
	   
	<div class="article-header">
	    
		<a class="title" href="/2019/08/13/Round-Corridor-by-codeforces/">Round Corridor by codeforces</a>  
	       
		 

		<div class="meta">
			<time>Aug 13, 2019</time>			
		</div>
	</div>


	

    
	<div class="typo article-excerpt">	
		 
			<p><img src="https://bigboomclap.oss-cn-shenzhen.aliyuncs.com/%E5%8D%9A%E5%AE%A2%E5%9B%BE%E7%89%87/N8SGG06PU21YN3CK_CBYO~1.png" alt></p>
<p><img src="https://bigboomclap.oss-cn-shenzhen.aliyuncs.com/%E5%8D%9A%E5%AE%A2%E5%9B%BE%E7%89%87/%6089%603%5DF6DQ71~D~P%7B(PQVJ8.png" alt></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> inf 1e18</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ll long long</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> int long long</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> F(i,a) for(int i=0;i&lt;a;i++)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> max_n = <span class="number">1e6</span>+<span class="number">10</span>;</span><br><span class="line">ll n, m, q;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">upzheng</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (a % b == <span class="number">0</span>)</span><br><span class="line">		<span class="keyword">return</span> a / b;</span><br><span class="line">	<span class="keyword">return</span> a / b + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">gcd</span><span class="params">(<span class="keyword">int</span> a ,<span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (b == <span class="number">0</span>)<span class="keyword">return</span> a;</span><br><span class="line">	<span class="keyword">return</span> gcd(b, a % b);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> a, b, c, d;</span><br><span class="line"><span class="function"><span class="keyword">signed</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="built_in">cin</span> &gt;&gt; n &gt;&gt; m &gt;&gt; q;</span><br><span class="line">	<span class="keyword">int</span> temp = gcd(n,m);</span><br><span class="line">	<span class="keyword">int</span> temp1 = n / temp, temp2 = m / temp;</span><br><span class="line">	<span class="keyword">while</span> (q--) &#123;</span><br><span class="line">		<span class="keyword">bool</span> flag = <span class="number">0</span>;</span><br><span class="line">		<span class="built_in">cin</span> &gt;&gt; a &gt;&gt; b &gt;&gt; c &gt;&gt; d;</span><br><span class="line">		n = temp1, m = temp2;</span><br><span class="line">		<span class="keyword">if</span> (a == c &amp;&amp; a == <span class="number">1</span>) &#123;</span><br><span class="line">			<span class="keyword">if</span> (upzheng(b, n) == upzheng(d, n))&#123;</span><br><span class="line">				flag = <span class="number">1</span>; <span class="built_in">cout</span> &lt;&lt; <span class="string">"YES"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">				<span class="keyword">continue</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (a == c &amp;&amp; a == <span class="number">2</span>) &#123;</span><br><span class="line">			<span class="keyword">if</span> (upzheng(b, m) == upzheng(d, m)) &#123;</span><br><span class="line">				flag = <span class="number">1</span>; <span class="built_in">cout</span> &lt;&lt; <span class="string">"YES"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">				<span class="keyword">continue</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (a == <span class="number">1</span> &amp;&amp; c == <span class="number">2</span>) &#123;</span><br><span class="line">			<span class="keyword">if</span> (upzheng(b, n) == upzheng(d, m)) &#123;</span><br><span class="line">				flag = <span class="number">1</span>; <span class="built_in">cout</span> &lt;&lt; <span class="string">"YES"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">				<span class="keyword">continue</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (a == <span class="number">2</span> &amp;&amp; c == <span class="number">1</span>) &#123;</span><br><span class="line">			<span class="keyword">if</span> (upzheng(b, m) == upzheng(d, n)) &#123;</span><br><span class="line">				flag = <span class="number">1</span>; <span class="built_in">cout</span> &lt;&lt; <span class="string">"YES"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">				<span class="keyword">continue</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> (!flag)</span><br><span class="line">			<span class="built_in">cout</span> &lt;&lt; <span class="string">"NO"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


		  	  
	</div>



	<div class="article-categories">
	 
	</div>
	

	<div class="article-tags">
		
			<i class="iconfont icon-tags" style="margin-right:4px"></i>
			            
				<a class="link" href="/tags/number-theory/">number theory</a>           
			
		
	</div>

	<div class="article-bottom">
		<a class="readmore" href="/2019/08/13/Round-Corridor-by-codeforces/">阅读更多</a> 	
	</div>	
    
</article>

	
	
	
	

<article class="article">		
	   
	<div class="article-header">
	    
		<a class="title" href="/2019/08/12/ZOJ-Problem-Set-1010/">ZOJ Problem Set - 1010</a>  
	       
		 

		<div class="meta">
			<time>Aug 12, 2019</time>			
		</div>
	</div>


	

    
	<div class="typo article-excerpt">	
		 
			<p>ZOJ Problem Set - 1010</p>
<p>Area</p>
<p>Jerry, a middle school student, addicts himself to mathematical research. Maybe the problems he has thought are really too easy to an expert. But as an amateur, especially as a 15-year-old boy, he had done very well. He is so rolling in thinking the mathematical problem that he is easily to try to solve every problem he met in a mathematical way. One day, he found a piece of paper on the desk. His younger sister, Mary, a four-year-old girl, had drawn some lines. But those lines formed a special kind of concave polygon by accident as Fig. 1 shows.</p>
<p><img src="http://acm.zju.edu.cn/onlinejudge/showImage.do?name=0000%2F1010%2F1010-1.jpg" alt="img"><br>Fig. 1 The lines his sister had drawn</p>
<p>“Great!” he thought, “The polygon seems so regular. I had just learned how to calculate the area of triangle, rectangle and circle. I’m sure I can find out how to calculate the area of this figure.” And so he did. First of all, he marked the vertexes in the polygon with their coordinates as Fig. 2 shows. And then he found the result–0.75 effortless.</p>
<p><img src="/images/placeholder.png" alt="img" data-src="http://acm.zju.edu.cn/onlinejudge/showImage.do?name=0000%2F1010%2F1010-2.jpg" class="lazyload"><br>Fig.2 The polygon with the coordinates of vertexes</p>
<p>Of course, he was not satisfied with the solution of such an easy problem. “Mmm, if there’s a random polygon on the paper, then how can I calculate the area?” he asked himself. Till then, he hadn’t found out the general rules on calculating the area of a random polygon. He clearly knew that the answer to this question is out of his competence. So he asked you, an erudite expert, to offer him help. The kind behavior would be highly appreciated by him.</p>
<p><strong>Input</strong></p>
<p>The input data consists of several figures. The first line of the input for each figure contains a single integer n, the number of vertexes in the figure. (0 &lt;= n &lt;= 1000).</p>
<p>In the following n lines, each contain a pair of real numbers, which describes the coordinates of the vertexes, (xi, yi). The figure in each test case starts from the first vertex to the second one, then from the second to the third, ���� and so on. At last, it closes from the nth vertex to the first one.</p>
<p>The input ends with an empty figure (n = 0). And this figure not be processed.</p>
<p><strong>Output</strong></p>
<p>As shown below, the output of each figure should contain the figure number and a colon followed by the area of the figure or the string “Impossible”.</p>
<p>If the figure is a polygon, compute its area (accurate to two fractional digits). According to the input vertexes, if they cannot form a polygon (that is, one line intersects with another which shouldn’t be adjoined with it, for example, in a figure with four lines, the first line intersects with the third one), just display “Impossible”, indicating the figure can’t be a polygon. If the amount of the vertexes is not enough to form a closed polygon, the output message should be “Impossible” either.</p>
<p>Print a blank line between each test cases.</p>
<p><strong>Sample Input</strong></p>
<p>5<br>0 0<br>0 1<br>0.5 0.5<br>1 1<br>1 0<br>4<br>0 0<br>0 1<br>1 0<br>1 1<br>0</p>
<p><strong>Output for the Sample Input</strong></p>
<p>Figure 1: 0.75</p>
<p>Figure 2: Impossible</p>
<p>`</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> max_n = <span class="number">1e3</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Pt</span> &#123;</span></span><br><span class="line">	<span class="keyword">double</span> x, y;</span><br><span class="line">	Pt() &#123;&#125;</span><br><span class="line">	Pt(<span class="keyword">double</span> a, <span class="keyword">double</span> b) &#123;</span><br><span class="line">		x = a; y = b;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line">Pt p[max_n];</span><br><span class="line">Pt <span class="keyword">operator</span> -(Pt p, Pt p1) &#123;</span><br><span class="line">	<span class="keyword">return</span> Pt(p.x - p1.x, p.y - p1.y);</span><br><span class="line">&#125;</span><br><span class="line">Pt <span class="keyword">operator</span> + (Pt p, Pt p1) &#123;</span><br><span class="line">	<span class="keyword">return</span> Pt(p.x + p1.x, p.y + p1.y);</span><br><span class="line">&#125;</span><br><span class="line">Pt <span class="keyword">operator</span> * (<span class="keyword">double</span> A, Pt p1) &#123;</span><br><span class="line">	<span class="keyword">return</span> Pt(A * p1.x, A * p1.y);</span><br><span class="line">&#125;</span><br><span class="line">Pt <span class="keyword">operator</span> * (Pt p1, <span class="keyword">double</span> A) &#123;</span><br><span class="line">	<span class="keyword">return</span> Pt(A * p1.x, A * p1.y);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">det</span><span class="params">(Pt a, Pt b)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> a.x * b.y - a.y * b.x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// = 0 表示,相交于端点也是认定为相交</span></span><br><span class="line"><span class="comment">//https://www.cnblogs.com/g0feng/archive/2012/05/18/2508293.html</span></span><br><span class="line"><span class="comment">/*线段相交模板</span></span><br><span class="line"><span class="comment">应用：</span></span><br><span class="line"><span class="comment">1.判断两个线段相交</span></span><br><span class="line"><span class="comment">2.判断线段与直线相交</span></span><br><span class="line"><span class="comment">3.判断点在矩形内 */</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">SegmentProperIntersection</span><span class="params">(Pt s1, Pt e1, Pt s2, Pt e2)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">double</span> c1 = det(s2 - s1, e1 - s1), c2 = det(e1 - s1, e2 - s1);</span><br><span class="line">	<span class="keyword">double</span> c3 = det(s1 - s2, e2 - s2), c4 = det(e2 - s2, e1 - s2);</span><br><span class="line">	<span class="keyword">if</span> (c1 * c2 &gt;= <span class="number">0</span> &amp;&amp; c3 * c4 &gt;= <span class="number">0</span>)<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">havecross</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="comment">//从第 三 条线段开始, 一直到第 N-1 条线段</span></span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;n<span class="number">-1</span>;i++)</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt; i; j++) &#123;</span><br><span class="line">			<span class="keyword">if</span> (SegmentProperIntersection(p[i], p[i + <span class="number">1</span>], p[j - <span class="number">1</span>], p[j])) &#123;</span><br><span class="line">				<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	<span class="comment">//判断最后一条线段p[0]_p[n-1]</span></span><br><span class="line">	<span class="comment">//从第二条线段一直比较到第 n-2 条线段</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n - <span class="number">2</span>; i++) &#123; <span class="comment">//p[i]__p[i+1]</span></span><br><span class="line">		<span class="keyword">if</span> (SegmentProperIntersection(p[<span class="number">0</span>], p[n - <span class="number">1</span>], p[i], p[i + <span class="number">1</span>])) &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">Area</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">double</span> area = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n - <span class="number">1</span>; i++)</span><br><span class="line">		area += det(p[i]-p[<span class="number">0</span>],p[i+<span class="number">1</span>]-p[<span class="number">0</span>]);</span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">fabs</span>(area)/<span class="number">2.0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> test = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span> (<span class="built_in">cin</span> &gt;&gt; n) &#123;</span><br><span class="line">		<span class="keyword">if</span> (n == <span class="number">0</span>)<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">double</span> x, y;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">			<span class="built_in">cin</span> &gt;&gt; x &gt;&gt; y;</span><br><span class="line">			p[i] = Pt(x, y);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> (n &lt; <span class="number">3</span>)&#123; <span class="comment">//如果小于三个点, 肯定不能求面积</span></span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">"Figure %d: Impossible\n"</span>, ++test);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">		<span class="keyword">continue</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> (havecross()) &#123;</span><br><span class="line">			<span class="comment">/*printf("Figure %d: Impossible\n", ++test);</span></span><br><span class="line"><span class="comment">			printf("\n");*/</span></span><br><span class="line">			<span class="built_in">cout</span> &lt;&lt; <span class="string">"Figure "</span> &lt;&lt; ++test &lt;&lt; <span class="string">": Impossible\n"</span>;</span><br><span class="line">			<span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">			<span class="keyword">continue</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"Figure %d: %.2lf"</span>, ++test, Area());</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


		  	  
	</div>



	<div class="article-categories">
	 
	</div>
	

	<div class="article-tags">
		
			<i class="iconfont icon-tags" style="margin-right:4px"></i>
			            
				<a class="link" href="/tags/Computing-Geometry/">Computing Geometry</a>           
			
		
	</div>

	<div class="article-bottom">
		<a class="readmore" href="/2019/08/12/ZOJ-Problem-Set-1010/">阅读更多</a> 	
	</div>	
    
</article>

	
	
	
	

<article class="article">		
	   
	<div class="article-header">
	    
		<a class="title" href="/2019/08/12/template-of-Computing-Geometry/">template of Computing Geometry</a>  
	       
		 

		<div class="meta">
			<time>Aug 12, 2019</time>			
		</div>
	</div>


	

    
	<div class="typo article-excerpt">	
		 
			<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;math.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> eps = <span class="number">1e-12</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> PI = <span class="built_in">acos</span>(<span class="number">-1.0</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> max_n = <span class="number">1010</span>;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; vet;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">a == b	sgn(a - b) == 0</span></span><br><span class="line"><span class="comment">a &gt; b	sgn(a - b) &gt; 0</span></span><br><span class="line"><span class="comment">a &gt;= b	sgn(a - b) &gt;= 0</span></span><br><span class="line"><span class="comment">a &lt; b	sgn(a - b) &lt; 0</span></span><br><span class="line"><span class="comment">a &lt;= b	sgn(a - b) &lt;= 0</span></span><br><span class="line"><span class="comment">a != b	sgn(a - b) != 0</span></span><br><span class="line"><span class="comment">计算机浮点数误差，在对浮点数进行大小比较时，如果他们的差的绝对值小于这个量，那么我们就认为他们是相等的</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">// sgn返回x经过eps（ilon）处理的符号，负数返回-1，正数返回1，x的绝对值如果足够小，就返回0。</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">sgn</span><span class="params">(<span class="keyword">double</span> x)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> x&lt;-eps ? <span class="number">-1</span> : x&gt;eps ? <span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">当提供给C语言中的标准库函数double sqrt (double x)的x为负值</span></span><br><span class="line"><span class="comment">时，sqrt会返回nan，输出时会显示成nan或-1.#IND00（根据系统的不同）</span></span><br><span class="line"><span class="comment">。在进行计算几何编程时，经常有对接近零</span></span><br><span class="line"><span class="comment">的数进行开方的情况，如果输入的数是一个极小的负数，那</span></span><br><span class="line"><span class="comment">么sqrt会返回nan这个错误的结果，导致输出错误。解决的方</span></span><br><span class="line"><span class="comment">法就是将sqrt包装一下，在每次开方前进行判断</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">mysqrt</span><span class="params">(<span class="keyword">double</span> x)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> max(<span class="number">0.0</span>, <span class="built_in">sqrt</span>(x));</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">负零</span></span><br><span class="line"><span class="comment">大部分的标程的输出是不会输出负零的，如下面这段程序：</span></span><br><span class="line"><span class="comment">int main() &#123;</span></span><br><span class="line"><span class="comment">	printf("%.2f\n", -0.0000000001);</span></span><br><span class="line"><span class="comment">	return 0;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">会输出-0.00。有时这样的结果是错误的，所以在没有Special Judge的题目</span></span><br><span class="line"><span class="comment">要求四舍五入时，不要忘记对负零进行特殊判断。</span></span><br><span class="line"><span class="comment">但有的标程也不会进行这样的特殊判断，所以在WA时不要放弃摸索。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Pt</span> &#123;</span></span><br><span class="line">	<span class="keyword">double</span> x, y;</span><br><span class="line">	Pt() &#123;&#125;</span><br><span class="line">	Pt(<span class="keyword">double</span> a, <span class="keyword">double</span> b) &#123;</span><br><span class="line">		x = a; y = b;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">norm</span><span class="params">(Pt p)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">sqrt</span>(p.x * p.x + p.y * p.y);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">(Pt p)</span> </span>&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"(%f, %f)\n"</span>, p.x, p.y);</span><br><span class="line">&#125;</span><br><span class="line">Pt <span class="keyword">operator</span> -(Pt p, Pt p1) &#123;</span><br><span class="line">	<span class="keyword">return</span> Pt(p.x - p1.x, p.y - p1.y);</span><br><span class="line">&#125;</span><br><span class="line">Pt <span class="keyword">operator</span> + (Pt p, Pt p1) &#123;</span><br><span class="line">	<span class="keyword">return</span> Pt(p.x + p1.x, p.y + p1.y);</span><br><span class="line">&#125;</span><br><span class="line">Pt <span class="keyword">operator</span> * (<span class="keyword">double</span> A, Pt p1) &#123;</span><br><span class="line">	<span class="keyword">return</span> Pt(A * p1.x, A * p1.y);</span><br><span class="line">&#125;</span><br><span class="line">Pt <span class="keyword">operator</span> * (Pt p1, <span class="keyword">double</span> A) &#123;</span><br><span class="line">	<span class="keyword">return</span> Pt(A * p1.x, A * p1.y);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">dist</span><span class="params">(Pt a, Pt b)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> norm((a - b));</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//向量 a⃗ =(ax,ay) 的长度是 √a2x+a2y 。</span></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">len</span><span class="params">(Pt p)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">sqrt</span>(p.x * p.x + p.y * p.y);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//a⋅b=axbx+ayby=|a||b|cosθ 点积</span></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">dot</span><span class="params">(Pt a, Pt b)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> a.x* b.x + a.y * b.y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">|b×a|&gt;0 	a在b的逆时针方向</span></span><br><span class="line"><span class="comment">|b×a|=0	a与b共线</span></span><br><span class="line"><span class="comment">|b×a|&lt;0	a在b的顺时针方向*/</span></span><br><span class="line"><span class="comment">//a×b=axby−aybx	叉积</span></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">det</span><span class="params">(Pt a, Pt b)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> a.x* b.y - a.y * b.x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//将向量 a⃗  绕原点逆时针旋转 A 弧度。</span></span><br><span class="line"><span class="function">Pt <span class="title">rotate</span><span class="params">(Pt p, <span class="keyword">double</span> a)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> Pt(p.x * <span class="built_in">cos</span>(a) - p.y * <span class="built_in">sin</span>(a), p.x * <span class="built_in">sin</span>(a) + p.y * <span class="built_in">cos</span>(a));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//直线和线段</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//我们可以用一条线段的两个端点来表示一条线段。直线的表示有两种方式，一种方</span></span><br><span class="line"><span class="comment">//式是使用二元一次方程 y = kx + b 来表示，另一种是用直线上任意一条长度不为</span></span><br><span class="line"><span class="comment">//零的线段来表示。由于使用方程表示接近垂直于某坐标轴的直线时容易产生精度误</span></span><br><span class="line"><span class="comment">//差，所以我们通常使用直线上的某条线段来表示直线。</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Sg</span> &#123;</span></span><br><span class="line">	Pt s, t;</span><br><span class="line">	Sg(Pt s, Pt t) : s(s), t(t) &#123; &#125;</span><br><span class="line">	Sg(<span class="keyword">double</span> a, <span class="keyword">double</span> b, <span class="keyword">double</span> c, <span class="keyword">double</span> d) : s(a, b), t(c, d) &#123;</span><br><span class="line">		s.x = a; s.y = b;</span><br><span class="line">		t.x = c; t.y = d;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//点在线段上的判断</span></span><br><span class="line"><span class="comment">//判断点 C 在线段 AB 上的两条依据：</span></span><br><span class="line"><span class="comment">//CA⋅CB= 0 。</span></span><br><span class="line"><span class="comment">//C 在以 AB 为对角顶点的矩形内</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">PtOnSegment</span><span class="params">(Pt s, Pt t, Pt a)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> !det(a - s, a - t) &amp;&amp; min(s.x, t.x) &lt;= a.x &amp;&amp; a.x &lt;= max(s.x, t.x) &amp;&amp;</span><br><span class="line">		min(s.y, t.y) &lt;= a.y &amp;&amp; a.y &lt;= max(s.y, t.y);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//判断点 C 在 AB 为对角线定点的矩形内较麻烦，可以直接判断 CA→⋅CB→ </span></span><br><span class="line"><span class="comment">//的符号来判断 C 在直线 AB 上是否在 AB 之间。</span></span><br><span class="line"><span class="comment">//bool PtOnSegment(Pt p, Pt a, Pt b) &#123;</span></span><br><span class="line"><span class="comment">//	return !sgn(det(p - a, b - a)) &amp;&amp; sgn(dot(p - a, p - b)) &lt;= 0;</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"><span class="comment">//把上例代码中的&lt;=改成&lt;就能实现不含线段端点的点在线段上的判断。</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//点在直线上的判断</span></span><br><span class="line"><span class="comment">//点在直线上的判断很简单只要把点在线段上的判断的步骤2去掉即可。</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">PtOnline</span><span class="params">(Pt p, Pt a, Pt b)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> !sgn(det(p - a, b - a));</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//求点到直线的投影</span></span><br><span class="line"><span class="function">Pt <span class="title">PtLineProj</span><span class="params">(Pt s, Pt t, Pt p)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">double</span> r = dot(p - s, t - s) / (norm(t - s) * norm(t - s));</span><br><span class="line">	<span class="keyword">return</span> s + (t - s) * r;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//判断直线关系</span></span><br><span class="line"><span class="comment">//直线有相交和平行两种关系，靠叉乘能简单判断。</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">parallel</span><span class="params">(Pt a, Pt b, Pt s, Pt t)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> !sgn(det(a - b, s - t));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// = 0 表示,相交于端点也是认定为相交</span></span><br><span class="line"><span class="comment">//https://www.cnblogs.com/g0feng/archive/2012/05/18/2508293.html</span></span><br><span class="line"><span class="comment">///*线段相交模板</span></span><br><span class="line"><span class="comment">//应用：</span></span><br><span class="line"><span class="comment">//1.判断两个线段相交</span></span><br><span class="line"><span class="comment">//2.判断线段与直线相交</span></span><br><span class="line"><span class="comment">//3.判断点在矩形内 </span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">SegmentProperIntersection</span><span class="params">(Pt s1, Pt e1, Pt s2, Pt e2)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">double</span> c1 = det(s2 - s1, e1 - s1), c2 = det(e1 - s1, e2 - s1);</span><br><span class="line">	<span class="keyword">double</span> c3 = det(s1 - s2, e2 - s2), c4 = det(e2 - s2, e1 - s2);</span><br><span class="line">	<span class="keyword">if</span> (c1 * c2 &gt;= <span class="number">0</span> &amp;&amp; c3 * c4 &gt;= <span class="number">0</span>)<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//求点到线段的距离</span></span><br><span class="line"><span class="comment">//求线段 ab 到点p最短距离的方法为：</span></span><br><span class="line"><span class="comment">//根据点 p 到的投影点的位置进行判断的方法：</span></span><br><span class="line"><span class="comment">//判断线段 pa 和 ab 所成的夹角，如果是钝角，那么 | pa | 是点到线段的最短距离。</span></span><br><span class="line"><span class="comment">//判断线段 pb 和 ab 所成的夹角，如果是钝角，那么 | pb | 是点到线段的最短距离。</span></span><br><span class="line"><span class="comment">//线段 pa 和线段 pb 与 ab 所成的夹角都不为钝角，那么点 p 到线段 ab 的距离是点 </span></span><br><span class="line"><span class="comment">//p 到直线 ab 的距离，这个距离可以用面积法直接算出来。</span></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">PtSegmentDist</span><span class="params">(Pt a, Pt b, Pt p)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (sgn(dot(p - a, b - a)) &lt;= <span class="number">0</span>)<span class="keyword">return</span> norm(p - a);</span><br><span class="line">	<span class="keyword">if</span> (sgn(dot(p - b, a - b)) &lt;= <span class="number">0</span>)<span class="keyword">return</span> norm(p - b);</span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">fabs</span>(det(a - p, b - p)) / norm(a - b);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//三角形</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">//三角形的面积</span></span><br><span class="line"><span class="comment">//三角形的面积可以由叉积直接求出。</span></span><br><span class="line"><span class="comment">//S△ABC = | 1/2AB→×AC→ |</span></span><br><span class="line"><span class="comment">//判断点在三角形内</span></span><br><span class="line"><span class="comment">//判断点 P 在三角形 ABC 内部常用的又两种方法，面积法和叉积法。</span></span><br><span class="line"><span class="comment">//面积法</span></span><br><span class="line"><span class="comment">//S△PAB + S△PAC + S△PBC = S△ABC</span></span><br><span class="line"><span class="comment">//叉积法</span></span><br><span class="line"><span class="comment">//利用叉积的正负号判断，如图所示， AP 在向量 AC 的顺时针方向， CP 在</span></span><br><span class="line"><span class="comment">//向量 BC 的顺时针方向， BP 在向量 BC 的顺时针方向，利用这一性质推广，那</span></span><br><span class="line"><span class="comment">//么可以利用叉积的正负号来判断一个点是否在一个凸多边形内部。</span></span><br><span class="line"><span class="comment">struct line &#123; Pt a, b; &#125;;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">double distance(Pt p1, Pt p2) &#123;</span></span><br><span class="line"><span class="comment">	return sqrt((p1.x - p2.x) * (p1.x - p2.x) + (p1.y - p2.y) * (p1.y - p2.y));</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Pt intersection(line u, line v) &#123;</span></span><br><span class="line"><span class="comment">	Pt ret = u.a;</span></span><br><span class="line"><span class="comment">	double t = ((u.a.x - v.a.x) * (v.a.y - v.b.y) - (u.a.y - v.a.y) * (v.a.x - v.b.x))</span></span><br><span class="line"><span class="comment">		/ ((u.a.x - u.b.x) * (v.a.y - v.b.y) - (u.a.y - u.b.y) * (v.a.x - v.b.x));</span></span><br><span class="line"><span class="comment">	ret.x += (u.b.x - u.a.x) * t;</span></span><br><span class="line"><span class="comment">	ret.y += (u.b.y - u.a.y) * t;</span></span><br><span class="line"><span class="comment">	return ret;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">//外心</span></span><br><span class="line"><span class="comment">Pt circumcenter(Pt a, Pt b, Pt c) &#123;</span></span><br><span class="line"><span class="comment">	line u, v;</span></span><br><span class="line"><span class="comment">	u.a.x = (a.x + b.x) / 2;</span></span><br><span class="line"><span class="comment">	u.a.y = (a.y + b.y) / 2;</span></span><br><span class="line"><span class="comment">	u.b.x = u.a.x - a.y + b.y;</span></span><br><span class="line"><span class="comment">	u.b.y = u.a.y + a.x - b.x;</span></span><br><span class="line"><span class="comment">	v.a.x = (a.x + c.x) / 2;</span></span><br><span class="line"><span class="comment">	v.a.y = (a.y + c.y) / 2;</span></span><br><span class="line"><span class="comment">	v.b.x = v.a.x - a.y + c.y;</span></span><br><span class="line"><span class="comment">	v.b.y = v.a.y + a.x - c.x;</span></span><br><span class="line"><span class="comment">	return intersection(u, v);</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">//内心</span></span><br><span class="line"><span class="comment">Pt incenter(Pt a, Pt b, Pt c) &#123;</span></span><br><span class="line"><span class="comment">	line u, v;</span></span><br><span class="line"><span class="comment">	double m, n;</span></span><br><span class="line"><span class="comment">	u.a = a;</span></span><br><span class="line"><span class="comment">	m = atan2(b.y - a.y, b.x - a.x);</span></span><br><span class="line"><span class="comment">	n = atan2(c.y - a.y, c.x - a.x);</span></span><br><span class="line"><span class="comment">	u.b.x = u.a.x + cos((m + n) / 2);</span></span><br><span class="line"><span class="comment">	u.b.y = u.a.y + sin((m + n) / 2);</span></span><br><span class="line"><span class="comment">	v.a = b;</span></span><br><span class="line"><span class="comment">	m = atan2(a.y - b.y, a.x - b.x);</span></span><br><span class="line"><span class="comment">	n = atan2(c.y - b.y, c.x - b.x);</span></span><br><span class="line"><span class="comment">	v.b.x = v.a.x + cos((m + n) / 2);</span></span><br><span class="line"><span class="comment">	v.b.y = v.a.y + sin((m + n) / 2);</span></span><br><span class="line"><span class="comment">	return intersection(u, v);</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">//垂心</span></span><br><span class="line"><span class="comment">Pt perpencenter(Pt a, Pt b, Pt c) &#123;</span></span><br><span class="line"><span class="comment">	line u, v;</span></span><br><span class="line"><span class="comment">	u.a = c;</span></span><br><span class="line"><span class="comment">	u.b.x = u.a.x - a.y + b.y;</span></span><br><span class="line"><span class="comment">	u.b.y = u.a.y + a.x - b.x;</span></span><br><span class="line"><span class="comment">	v.a = b;</span></span><br><span class="line"><span class="comment">	v.b.x = v.a.x - a.y + c.y;</span></span><br><span class="line"><span class="comment">	v.b.y = v.a.y + a.x - c.x;</span></span><br><span class="line"><span class="comment">	return intersection(u, v);</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">//重心</span></span><br><span class="line"><span class="comment">//到三角形三顶点距离的平方和最小的点</span></span><br><span class="line"><span class="comment">//三角形内到三边距离之积最大的点</span></span><br><span class="line"><span class="comment">Pt barycenter(Pt a, Pt b, Pt c) &#123;</span></span><br><span class="line"><span class="comment">	line u, v;</span></span><br><span class="line"><span class="comment">	u.a.x = (a.x + b.x) / 2;</span></span><br><span class="line"><span class="comment">	u.a.y = (a.y + b.y) / 2;</span></span><br><span class="line"><span class="comment">	u.b = c;</span></span><br><span class="line"><span class="comment">	v.a.x = (a.x + c.x) / 2;</span></span><br><span class="line"><span class="comment">	v.a.y = (a.y + c.y) / 2;</span></span><br><span class="line"><span class="comment">	v.b = b;</span></span><br><span class="line"><span class="comment">	return intersection(u, v);</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">//费马点</span></span><br><span class="line"><span class="comment">//若三角形3个内角均小于120°，那么3条距离连线正好三等分费马点所在的周角，即该点所对三角形三边的张角相等，均为120°</span></span><br><span class="line"><span class="comment">//。所以三角形的费马点也称为三角形的等角中心。</span></span><br><span class="line"><span class="comment">//若三角形有一内角大于等于120°，则此钝角的顶点就是距离和最小的点。</span></span><br><span class="line"><span class="comment">//到三角形三顶点距离之和最小的点</span></span><br><span class="line"><span class="comment">Pt fermentpoint(Pt a, Pt b, Pt c) &#123;</span></span><br><span class="line"><span class="comment">	Pt u, v;</span></span><br><span class="line"><span class="comment">	double step = fabs(a.x) + fabs(a.y) + fabs(b.x) + fabs(b.y) + fabs(c.x) + fabs(c.y);</span></span><br><span class="line"><span class="comment">	int i, j, k;</span></span><br><span class="line"><span class="comment">	u.x = (a.x + b.x + c.x) / 3;</span></span><br><span class="line"><span class="comment">	u.y = (a.y + b.y + c.y) / 3;</span></span><br><span class="line"><span class="comment">	while (step &gt; 1e-10)</span></span><br><span class="line"><span class="comment">		for (k = 0; k &lt; 10; step /= 2, k++)</span></span><br><span class="line"><span class="comment">			for (i = -1; i &lt;= 1; i++)</span></span><br><span class="line"><span class="comment">				for (j = -1; j &lt;= 1; j++) &#123;</span></span><br><span class="line"><span class="comment">					v.x = u.x + step * i;</span></span><br><span class="line"><span class="comment">					v.y = u.y + step * j;</span></span><br><span class="line"><span class="comment">					if (distance(u, a) + distance(u, b) + distance(u, c) &gt; distance(v, a) + distance(v, b) + distance(v, c))</span></span><br><span class="line"><span class="comment">						u = v;</span></span><br><span class="line"><span class="comment">				&#125;</span></span><br><span class="line"><span class="comment">	return u;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//简单多边形判断点是否在其内部</span></span><br><span class="line"><span class="comment">/*int dcmp(double x)</span></span><br><span class="line"><span class="comment">&#123;</span></span><br><span class="line"><span class="comment">	if (fabs(x) &lt; eps) return 0;</span></span><br><span class="line"><span class="comment">	return x &lt; 0 ? -1 : 1;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">bool InSegment(Pt P, Pt A, Pt B)</span></span><br><span class="line"><span class="comment">&#123;</span></span><br><span class="line"><span class="comment">	return dcmp(det(A - B, P - B)) == 0 &amp;&amp; dcmp(dot(A - P, B - P)) &lt;= 0;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">bool PointInPolygon(Pt p, Pt* poly, int n)</span></span><br><span class="line"><span class="comment">&#123;</span></span><br><span class="line"><span class="comment">	int wn = 0;</span></span><br><span class="line"><span class="comment">	for (int i = 0; i &lt; n; ++i)</span></span><br><span class="line"><span class="comment">	&#123;</span></span><br><span class="line"><span class="comment">		if (InSegment(p, poly[i], poly[(i + 1) % n])) return true;</span></span><br><span class="line"><span class="comment">		int k = dcmp(det(poly[(i + 1) % n] - poly[i], p - poly[i]));</span></span><br><span class="line"><span class="comment">		int d1 = dcmp(poly[i].y - p.y);</span></span><br><span class="line"><span class="comment">		int d2 = dcmp(poly[(i + 1) % n].y - p.y);</span></span><br><span class="line"><span class="comment">		if (k &gt; 0 &amp;&amp; d1 &lt;= 0 &amp;&amp; d2 &gt; 0) wn++;</span></span><br><span class="line"><span class="comment">		if (k &lt; 0 &amp;&amp; d2 &lt;= 0 &amp;&amp; d1&gt;0) wn--;</span></span><br><span class="line"><span class="comment">	&#125;</span></span><br><span class="line"><span class="comment">	if (wn != 0) return true;</span></span><br><span class="line"><span class="comment">	return false;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">const int max_n = 1010;</span></span><br><span class="line"><span class="comment">Pt point[max_n];</span></span><br><span class="line"><span class="comment">vector&lt;int&gt; vet;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">int main() &#123;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	int n;</span></span><br><span class="line"><span class="comment">	while (scanf("%d", &amp;n) == 1 &amp;&amp; n)</span></span><br><span class="line"><span class="comment">	&#123;</span></span><br><span class="line"><span class="comment">		Pt poly[max_n], p;</span></span><br><span class="line"><span class="comment">		for (int i = 0; i &lt; n; ++i)</span></span><br><span class="line"><span class="comment">			cin&gt;&gt;poly[i].x&gt;&gt;poly[i].y;</span></span><br><span class="line"><span class="comment">		cin&gt;&gt;p.x&gt;&gt;p.y;</span></span><br><span class="line"><span class="comment">		printf("%c\n", PointInPolygon(p, poly, n) ? 'T' : 'F');</span></span><br><span class="line"><span class="comment">	&#125;</span></span><br><span class="line"><span class="comment">	return 0;</span></span><br><span class="line"><span class="comment">&#125;*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> Polygon Pt</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> nxt(x) ((x+1)%n)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">PtInPolygon</span><span class="params">(Pt p, Polygon * a, <span class="keyword">int</span> size_a)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> num = <span class="number">0</span>, d1, d2, k, n = size_a;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">		<span class="keyword">if</span> (PtOnSegment(p, a[i], a[nxt(i)])) &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		k = sgn(det(a[nxt(i)] - a[i], p - a[i]));</span><br><span class="line">		d1 = sgn(a[i].y - p.y);</span><br><span class="line">		d2 = sgn(a[nxt(i)].y - p.y);</span><br><span class="line">		<span class="keyword">if</span> (k &gt; <span class="number">0</span> &amp;&amp; d1 &lt;= <span class="number">0</span> &amp;&amp; d2 &gt; <span class="number">0</span>) num++;</span><br><span class="line">		<span class="keyword">if</span> (k &lt; <span class="number">0</span> &amp;&amp; d2 &lt;= <span class="number">0</span> &amp;&amp; d1 &gt; <span class="number">0</span>) num--;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> num != <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Pt point[max_n];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> n;</span><br><span class="line">	<span class="keyword">while</span> (scanf_s(<span class="string">"%d"</span>, &amp;n) == <span class="number">1</span> &amp;&amp; n)</span><br><span class="line">	&#123;</span><br><span class="line">		Pt  poly[max_n], p;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">			<span class="built_in">cin</span> &gt;&gt; poly[i].x &gt;&gt; poly[i].y;</span><br><span class="line">		<span class="built_in">cin</span> &gt;&gt; p.x &gt;&gt; p.y;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%c\n"</span>, PtInPolygon(p, poly, n) ? <span class="string">'T'</span> : <span class="string">'F'</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


		  	  
	</div>



	<div class="article-categories">
	 
	</div>
	

	<div class="article-tags">
		
			<i class="iconfont icon-tags" style="margin-right:4px"></i>
			            
				<a class="link" href="/tags/Computing-Geometry/">Computing Geometry</a>           
			
		
	</div>

	<div class="article-bottom">
		<a class="readmore" href="/2019/08/12/template-of-Computing-Geometry/">阅读更多</a> 	
	</div>	
    
</article>

	
	
	
	

<article class="article">		
	   
	<div class="article-header">
	    
		<a class="title" href="/2019/08/02/矩阵的幂template/">矩阵的幂template</a>  
	       
		 

		<div class="meta">
			<time>Aug 02, 2019</time>			
		</div>
	</div>


	

    
	<div class="typo article-excerpt">	
		 
			<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line">ll mod;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">matrix</span>&#123;</span></span><br><span class="line">    ll a[<span class="number">2</span>][<span class="number">2</span>];</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    matrix()&#123;&#125;</span><br><span class="line">    matrix(<span class="keyword">int</span> k)&#123;</span><br><span class="line">        n = k;</span><br><span class="line">        <span class="built_in">memset</span>(a,<span class="number">0</span>,<span class="keyword">sizeof</span>(a));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++) a[i][i] = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    matrix <span class="keyword">operator</span> * (<span class="keyword">const</span> matrix &amp;B)&#123;</span><br><span class="line">        <span class="function">matrix <span class="title">C</span><span class="params">(n)</span></span>;</span><br><span class="line">        C.a[<span class="number">0</span>][<span class="number">0</span>] = (a[<span class="number">0</span>][<span class="number">0</span>] * B.a[<span class="number">0</span>][<span class="number">0</span>] % mod + a[<span class="number">0</span>][<span class="number">1</span>] * B.a[<span class="number">1</span>][<span class="number">0</span>] % mod) % mod;</span><br><span class="line">        C.a[<span class="number">0</span>][<span class="number">1</span>] = (a[<span class="number">0</span>][<span class="number">0</span>] * B.a[<span class="number">0</span>][<span class="number">1</span>] % mod + a[<span class="number">0</span>][<span class="number">1</span>] * B.a[<span class="number">1</span>][<span class="number">1</span>] % mod) % mod;</span><br><span class="line">        C.a[<span class="number">1</span>][<span class="number">0</span>] = (a[<span class="number">1</span>][<span class="number">0</span>] * B.a[<span class="number">0</span>][<span class="number">0</span>] % mod + a[<span class="number">1</span>][<span class="number">1</span>] * B.a[<span class="number">1</span>][<span class="number">0</span>] % mod) % mod;</span><br><span class="line">        C.a[<span class="number">1</span>][<span class="number">1</span>] = (a[<span class="number">1</span>][<span class="number">0</span>] * B.a[<span class="number">0</span>][<span class="number">1</span>] % mod + a[<span class="number">1</span>][<span class="number">1</span>] * B.a[<span class="number">1</span>][<span class="number">1</span>] % mod) % mod;</span><br><span class="line">        <span class="keyword">return</span> C;</span><br><span class="line">    &#125;</span><br><span class="line">    matrix <span class="keyword">operator</span> ^ (ll k)&#123;</span><br><span class="line">        matrix A = (*<span class="keyword">this</span>), res(n);</span><br><span class="line">        res.init();</span><br><span class="line">        <span class="keyword">while</span>(k)&#123;</span><br><span class="line">            <span class="keyword">if</span>(k&amp;<span class="number">1</span>) res = res * A;</span><br><span class="line">            A = A * A;</span><br><span class="line">            k &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">1000000</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">char</span> s[N];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ll x0,x1,a,b;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%lld%lld%lld%lld"</span>,&amp;x0,&amp;x1,&amp;a,&amp;b);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%s%lld"</span>,s,&amp;mod);</span><br><span class="line">    x0 %= mod, x1 %= mod, a %= mod, b %= mod;</span><br><span class="line">    <span class="function">matrix <span class="title">A</span><span class="params">(<span class="number">2</span>)</span></span>;</span><br><span class="line">    A.a[<span class="number">0</span>][<span class="number">0</span>] = a, A.a[<span class="number">0</span>][<span class="number">1</span>] = b;</span><br><span class="line">    A.a[<span class="number">1</span>][<span class="number">0</span>] = <span class="number">1</span>, A.a[<span class="number">1</span>][<span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line"><span class="comment">//    for(int i=0;i&lt;1000000;i++) s[i] = rand()%10+'0';</span></span><br><span class="line">    <span class="keyword">int</span> n = <span class="built_in">strlen</span>(s);</span><br><span class="line">    <span class="function">matrix <span class="title">res</span><span class="params">(<span class="number">2</span>)</span></span>;</span><br><span class="line">    res.init();</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">        res = res * (A ^ (s[n-i<span class="number">-1</span>]-<span class="string">'0'</span>));</span><br><span class="line">        A = A ^ <span class="number">10</span>;<span class="comment">//以十的次方为单位的快速幂</span></span><br><span class="line">    &#125;</span><br><span class="line">    ll ans = (res.a[<span class="number">1</span>][<span class="number">0</span>] * x1 % mod + res.a[<span class="number">1</span>][<span class="number">1</span>] * x0 % mod) % mod;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>,ans);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


		  	  
	</div>



	<div class="article-categories">
	 
	</div>
	

	<div class="article-tags">
		
	</div>

	<div class="article-bottom">
		<a class="readmore" href="/2019/08/02/矩阵的幂template/">阅读更多</a> 	
	</div>	
    
</article>

	
	
	
	

<article class="article">		
	   
	<div class="article-header">
	    
		<a class="title" href="/2019/07/27/Largest-Rectangle-In-a-Histigram plus/">Largest Rectangle In a Histigram Plus</a>  
	       
		 

		<div class="meta">
			<time>Jul 27, 2019</time>			
		</div>
	</div>


	

    
	<div class="typo article-excerpt">	
		 
			<p><img src="/images/placeholder.png" alt data-src="https://bigboomclap.oss-cn-shenzhen.aliyuncs.com/%E5%8D%9A%E5%AE%A2%E5%9B%BE%E7%89%87/9d74e2c8447938ef046a26300004712c.png" class="lazyload"></p>
<p>笛卡尔树：</p>
<p>​    她的节点的值满足堆得性质，而她节点的下标满足二叉搜索树的性质。</p>
<p>笛卡尔树的构造：</p>
<p>（1）从第一个元素开始，从左往右遍历数组L</p>
<p>（2）将元素L[0]作为树的根节点R</p>
<p>（3）for i in [a[1], a[2]…a[n]]</p>
<p>（4）如果a[i]小于根节点R，则将a[i]作为根节点R的父节点</p>
<p>（5）如果a[i]大于根节点R，则将a[i]从根节点的右节点开始寻找位置</p>
<p>（6）从右寻找的逻辑同根节点的对比方法</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">node_s</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">node_s</span> * <span class="title">l</span>;</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">node_s</span> * <span class="title">r</span>;</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">node_s</span> * <span class="title">p</span>;</span></span><br><span class="line">    <span class="keyword">int</span> v;</span><br><span class="line">&#125;<span class="keyword">node_t</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">tree_s</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">node_t</span> * root;</span><br><span class="line">&#125;<span class="keyword">tree_t</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">node_t</span> * node_create(<span class="keyword">node_t</span> * p, <span class="keyword">int</span> v)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">node_t</span> * n = (<span class="keyword">node_t</span>*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">node_t</span>));</span><br><span class="line">    <span class="built_in">memset</span>(n, <span class="number">0</span>, <span class="keyword">sizeof</span>(<span class="keyword">node_t</span>));</span><br><span class="line">    n-&gt;v = v;</span><br><span class="line">    n-&gt;p = p;</span><br><span class="line">    <span class="keyword">return</span> n;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">tree_t</span> * tree_create()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">tree_t</span> * t = (<span class="keyword">tree_t</span>*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">tree_t</span>));</span><br><span class="line">    <span class="built_in">memset</span>(t, <span class="number">0</span>, <span class="keyword">sizeof</span>(<span class="keyword">tree_t</span>));</span><br><span class="line">    <span class="keyword">return</span> t;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">tree_insert_n</span><span class="params">(<span class="keyword">node_t</span> * root, <span class="keyword">int</span> v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//当前节点比根节点小，则转换为根节点</span></span><br><span class="line">    <span class="keyword">if</span>(v &lt; root-&gt;v)&#123;</span><br><span class="line">        <span class="keyword">node_t</span> * n = node_create(root-&gt;p, v);</span><br><span class="line">        root-&gt;p-&gt;r = n;</span><br><span class="line">        root-&gt;p = n;</span><br><span class="line">        n-&gt;l = root;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="comment">//如果右子树不存在，直接放置</span></span><br><span class="line">        <span class="keyword">if</span>(root-&gt;r == <span class="number">0</span>)&#123;</span><br><span class="line">            root-&gt;r = node_create(root, v);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//当前的节点比根节点大，则从根节点的右子树开始查找</span></span><br><span class="line">        tree_insert_n(root-&gt;r, v);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">tree_insert</span><span class="params">(<span class="keyword">tree_t</span> * t, <span class="keyword">int</span> v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(t-&gt;root == <span class="number">0</span>)&#123;</span><br><span class="line">        t-&gt;root = node_create(<span class="number">0</span>, v);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//当前节点比根节点小，则转换为根节点</span></span><br><span class="line">    <span class="keyword">if</span>(v &lt; t-&gt;root-&gt;v)&#123;</span><br><span class="line">        <span class="keyword">node_t</span> * n = node_create(<span class="number">0</span>, v);</span><br><span class="line">        t-&gt;root-&gt;p = n;</span><br><span class="line">        n-&gt;l = t-&gt;root;</span><br><span class="line">        t-&gt;root = n;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="comment">//如果右子树不存在，直接放置</span></span><br><span class="line">        <span class="keyword">if</span>(t-&gt;root-&gt;r == <span class="number">0</span>)&#123;</span><br><span class="line">            t-&gt;root-&gt;r = node_create(t-&gt;root, v);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//当前的节点比根节点大，则从根节点的右子树开始查找</span></span><br><span class="line">        tree_insert_n(t-&gt;root-&gt;r, v);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">tree_print_n</span><span class="params">(<span class="keyword">node_t</span> * n, <span class="keyword">int</span> level, <span class="keyword">char</span> dir)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!n)&#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;level; ++i)&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"---"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%c--%d\n"</span>, dir, n-&gt;v);</span><br><span class="line">    tree_print_n(n-&gt;l, level+<span class="number">1</span>, <span class="string">'L'</span>);</span><br><span class="line">    tree_print_n(n-&gt;r, level+<span class="number">1</span>, <span class="string">'R'</span>);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">tree_print</span><span class="params">(<span class="keyword">tree_t</span> * tree)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    tree_print_n(tree-&gt;root, <span class="number">0</span>, <span class="string">'C'</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">tree_free</span><span class="params">(<span class="keyword">tree_t</span> * t)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    freopen(<span class="string">"test.txt"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">int</span> n, height;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n), n)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> arr[n];</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">tree_t</span> * tree = tree_create();</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;arr[i]);</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">        &#123;</span><br><span class="line">            tree_insert(tree, arr[i]);</span><br><span class="line">            tree_print(tree);</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        tree_free(tree);</span><br><span class="line"> </span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


		  	  
	</div>



	<div class="article-categories">
	 
	</div>
	

	<div class="article-tags">
		
			<i class="iconfont icon-tags" style="margin-right:4px"></i>
			            
				<a class="link" href="/tags/笛卡尔树/">笛卡尔树</a>           
			
		
	</div>

	<div class="article-bottom">
		<a class="readmore" href="/2019/07/27/Largest-Rectangle-In-a-Histigram plus/">阅读更多</a> 	
	</div>	
    
</article>

	
	
	
	

<article class="article">		
	   
	<div class="article-header">
	    
		<a class="title" href="/2019/07/24/背包问题/">背包问题</a>  
	       
		 

		<div class="meta">
			<time>Jul 24, 2019</time>			
		</div>
	</div>


	

    
	<div class="typo article-excerpt">	
		 
			<p>最基础的背包问题：</p>
<p>思路：从第1个开始往前选</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> max_N = <span class="number">1e3</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> dp[max_N][max_N];</span><br><span class="line"><span class="keyword">int</span> W, n;</span><br><span class="line"><span class="keyword">int</span> v[max_N], w[max_N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= W; i++)</span><br><span class="line">		dp[<span class="number">0</span>][i] = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = W; j &gt;= <span class="number">0</span>; j--) &#123;</span><br><span class="line">			<span class="keyword">if</span> (j &lt; w[i])</span><br><span class="line">				dp[i][j] = dp[i - <span class="number">1</span>][j];</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">				dp[i][j] = max(dp[i - <span class="number">1</span>][j], dp[i - <span class="number">1</span>][j - w[i]] + v[i]);</span><br><span class="line">		&#125;背包问题</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; dp[n][W] &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">		</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="built_in">cin</span> &gt;&gt; n &gt;&gt; W;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">		<span class="built_in">cin</span> &gt;&gt; w[i] &gt;&gt; v[i];</span><br><span class="line">	solve();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">4 5</span></span><br><span class="line"><span class="comment">2 3 1 2 3 4 2 2</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>


		  	  
	</div>



	<div class="article-categories">
	 
	</div>
	

	<div class="article-tags">
		
			<i class="iconfont icon-tags" style="margin-right:4px"></i>
			            
				<a class="link" href="/tags/dynamic-programming/">dynamic programming</a>           
			
		
	</div>

	<div class="article-bottom">
		<a class="readmore" href="/2019/07/24/背包问题/">阅读更多</a> 	
	</div>	
    
</article>

	
	
	
	

<article class="article">		
	   
	<div class="article-header">
	    
		<a class="title" href="/2019/07/23/Largest-Rectangle-In-a-Histigram/">Largest Rectangle In a Histigram</a>  
	       
		 

		<div class="meta">
			<time>Jul 23, 2019</time>			
		</div>
	</div>


	

    
	<div class="typo article-excerpt">	
		 
			<p>POJ2559</p>
<p><strong>思路</strong>：</p>
<p>符合最大矩形必须满足:</p>
<p>​            对于左边L：h[i[]&gt;h[i+1]    ,对于右边R:h[i]&gt;h[i+1]</p>
<p>​            用L[i]记录最大矩形可以到最左边的坐标：</p>
<p>​            L[i]=(j&lt;=i并且h[j-1]&lt;h的最大的j)            </p>
<p>​            R[i]=(j&gt;i并且h[j]&gt;h[i]的最小的j)</p>
<p>​            i从0开始往右，选取的比h[i]大的都为多余的数(就是可以选为最大的矩形的数），可以进行            忽略，只要记录可以到比h[i]大的最左的坐标，用单调栈来寻找选取数的左边离这个数最近的            坐标</p>
<p>​            用R[i]记录最大矩形可以到的最右的坐标：</p>
<p>​            i从最右开始往左，选取的比h[i]小的都为多余的数(就是可以选为最大的矩形的数），可以进            行忽略，只要记录可以到比h[i]大的最左的坐标，用单调栈来寻找选取数的右边离这个数最近            的坐标</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ll long long</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> max_N = <span class="number">1e5</span>+<span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="keyword">int</span> h[max_N];</span><br><span class="line"><span class="keyword">int</span> L[max_N], R[max_N];</span><br><span class="line"><span class="built_in">stack</span>&lt;<span class="keyword">int</span>&gt; sta;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> t = <span class="number">0</span>;<span class="comment">//栈的大小</span></span><br><span class="line">	<span class="comment">//L:</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">		<span class="keyword">while</span> (t &gt; <span class="number">0</span> &amp;&amp; h[i] &lt;= h[sta.top()]) &#123;</span><br><span class="line">			sta.pop(); t--;</span><br><span class="line">		&#125;</span><br><span class="line">		L[i] = (t == <span class="number">0</span>) ? <span class="number">0</span> :sta.top();</span><br><span class="line">		sta.push(i); t++;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="comment">//	for (int i = 1; i &lt;= n; i++)</span></span><br><span class="line"><span class="comment">//		cout &lt;&lt; "L[" &lt;&lt; i &lt;&lt; "]:" &lt;&lt; L[i] &lt;&lt; " ";</span></span><br><span class="line"><span class="comment">//	cout &lt;&lt; endl &lt;&lt; endl;</span></span><br><span class="line">	<span class="keyword">while</span> (!sta.empty())sta.pop();</span><br><span class="line">	<span class="comment">//R:</span></span><br><span class="line">	t = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = n; i &gt;=<span class="number">0</span>; i--) &#123;</span><br><span class="line">		<span class="keyword">while</span> (t &gt; <span class="number">0</span> &amp;&amp; h[i] &lt;= h[sta.top()]) &#123;</span><br><span class="line">			sta.pop(); t--;</span><br><span class="line">		&#125;</span><br><span class="line">		R[i] = (t == <span class="number">0</span>) ? n : sta.top()<span class="number">-1</span>;</span><br><span class="line"><span class="comment">//-1是求矩形的边长时长度和数值的关系，只能减去右边的，因为可能左边为0，右边为数值</span></span><br><span class="line">		sta.push(i); t++;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line"><span class="comment">//	for (int i = 1; i &lt;= n; i++)</span></span><br><span class="line"><span class="comment">//		cout &lt;&lt; "R[" &lt;&lt; i &lt;&lt; "]:" &lt;&lt; R[i] &lt;&lt; " ";</span></span><br><span class="line">	ll res = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">		res = max(res,(ll) h[i] * (R[i] - L[i]));</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; res &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">while</span> (<span class="built_in">cin</span> &gt;&gt; n&amp;&amp;n!=<span class="number">0</span>) &#123;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">			<span class="built_in">cin</span> &gt;&gt; h[i];</span><br><span class="line">		solve();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">7</span></span><br><span class="line"><span class="comment">2 1 4 5 1 3 3</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>


		  	  
	</div>



	<div class="article-categories">
	 
	</div>
	

	<div class="article-tags">
		
			<i class="iconfont icon-tags" style="margin-right:4px"></i>
			            
				<a class="link" href="/tags/单调栈/">单调栈</a>           
			
		
	</div>

	<div class="article-bottom">
		<a class="readmore" href="/2019/07/23/Largest-Rectangle-In-a-Histigram/">阅读更多</a> 	
	</div>	
    
</article>

	
	
	
	

<article class="article">		
	   
	<div class="article-header">
	    
		<a class="title" href="/2019/07/21/牛客多校round-2-F题/">牛客多校round_2 F题</a>  
	       
		 

		<div class="meta">
			<time>Jul 21, 2019</time>			
		</div>
	</div>


	

    
	<div class="typo article-excerpt">	
		 
			<p><img src="/images/placeholder.png" alt data-src="https://bigboomclap.oss-cn-shenzhen.aliyuncs.com/%E5%8D%9A%E5%AE%A2%E5%9B%BE%E7%89%87/006mSGrUly1g57j8kxa7cj30q10nj0u8.jpg" class="lazyload"></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ll long long </span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> max_n = <span class="number">40</span>;</span><br><span class="line">ll val[max_n][max_n];</span><br><span class="line">ll cost = <span class="number">0</span>,ans=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">(<span class="keyword">int</span> state,ll cost,<span class="keyword">int</span> pre,<span class="keyword">int</span> got)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (got + got == n) &#123;</span><br><span class="line">		ans = max(ans, cost); <span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> (n - pre - <span class="number">1</span> + got &lt; n / <span class="number">2</span>)</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	<span class="comment">//对于构不成n/2的情况，直接进行剪枝</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> next = pre + <span class="number">1</span>; next &lt; n; next++) &#123;</span><br><span class="line">	<span class="comment">//对于每一个next分支，都进行了递归，所以包含了所有情况</span></span><br><span class="line">		ll next_cost = cost;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">			<span class="keyword">if</span> ((state &gt;&gt; i) &amp; <span class="number">1</span>)</span><br><span class="line">				next_cost -= val[next][i];</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">				next_cost += val[next][i];</span><br><span class="line">		&#125;</span><br><span class="line">		solve(state | (<span class="number">1</span> &lt;&lt; next), next_cost, next, got + <span class="number">1</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">	n &lt;&lt;= <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; j++)</span><br><span class="line">			scanf_s( <span class="string">"%lld"</span>,&amp;val[i][j]);</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">		cost += val[<span class="number">0</span>][i];</span><br><span class="line">	solve((<span class="number">1</span>&lt;&lt;<span class="number">0</span>), cost, <span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, ans);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


		  	  
	</div>



	<div class="article-categories">
	 
	</div>
	

	<div class="article-tags">
		
			<i class="iconfont icon-tags" style="margin-right:4px"></i>
			            
				<a class="link" href="/tags/brute-force/">brute force</a>           
			
		
	</div>

	<div class="article-bottom">
		<a class="readmore" href="/2019/07/21/牛客多校round-2-F题/">阅读更多</a> 	
	</div>	
    
</article>

	
	
	
	

<article class="article">		
	   
	<div class="article-header">
	    
		<a class="title" href="/2019/07/16/Blocks/">Blocks</a>  
	       
		 

		<div class="meta">
			<time>Jul 16, 2019</time>			
		</div>
	</div>


	

    
	<div class="typo article-excerpt">	
		 
			<a id="more"></a>

<p>POJ 3734,又称红色病毒问题</p>
<p><strong>思路：</strong></p>
<p>​                假设染色到第i个方块，红绿色都为偶数情况共有$a_i$,红绿色恰有一个为偶数为$b_i$,红绿色都为                奇数情况共有$c_i$</p>
<p>对于i+1：<br>$$<br>a_{i+1}=2<em>a_i+b_i\<br>b_{i+1}=2</em>a_i+b_i+2<em>c_i\<br>c_{i+1}=b_i+2</em>c_i<br>$$<br>矩阵递推式：<br>$$<br>\begin{equation}<br>\left[<br>\begin{array}{cccc}<br> a_{i+1}\<br> b_{i+1}\<br>c_{i+1}<br>\end{array}<br>\right ]<br>=<br>\left[<br>\begin{array}{cccc}<br> 2 &amp;1 &amp; 0\<br>2 &amp;1&amp; 2\<br>0&amp; 1 &amp;2<br>\end{array}<br>\right ]<br>\left[<br>\begin{array}{cccc}<br> a_i\<br> b_i\<br> c_i<br>\end{array}<br>\right ]</p>
<p>\end{equation}<br>$$<br>因此，可以用矩阵的幂快速求解：<br>$$<br>\begin{equation}<br>\left[<br>\begin{array}{cccc}<br> a_{i+1}\<br> b_{i+1}\<br>c_{i+1}<br>\end{array}<br>\right ]<br>=<br>\left[<br>\begin{array}{cccc}<br> 2 &amp;1 &amp; 0\<br>2 &amp;1&amp; 2\<br>0&amp; 1 &amp;2<br>\end{array}<br>\right ]<br>……<br>\left[<br>\begin{array}{cccc}<br> a_i\<br> b_i\<br> c_i<br>\end{array}<br>\right ]</p>
<p>\end{equation}<br>$$</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ll long long</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> inf 1e9</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> vec vector<span class="meta-string">&lt;int&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> mat vector<span class="meta-string">&lt;vec&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> M=<span class="number">10007</span>;</span><br><span class="line"></span><br><span class="line"><span class="function">mat <span class="title">mul</span><span class="params">(mat&amp; A,mat&amp; B)</span> </span>&#123;</span><br><span class="line">	<span class="function">mat <span class="title">C</span><span class="params">(A.size(), vec(B[<span class="number">0</span>].size()))</span></span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; A.size(); i++)</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; B[<span class="number">0</span>].size(); k++)</span><br><span class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; B[<span class="number">0</span>].size(); j++)</span><br><span class="line">				C[i][j] = (C[i][j] + A[i][k] * B[k][j]) % M;</span><br><span class="line">	<span class="keyword">return</span> C;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">mat <span class="title">pow</span><span class="params">(mat A, ll n)</span> </span>&#123;</span><br><span class="line">	<span class="function">mat <span class="title">B</span><span class="params">(A.size(), vec(A.size()))</span></span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; A.size(); i++)</span><br><span class="line">		B[i][i] = <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">while</span> (n &gt; <span class="number">0</span>) &#123;</span><br><span class="line">		<span class="keyword">if</span> (n &amp; <span class="number">1</span>)B = mul(B, A);</span><br><span class="line">		A = mul(A, A);</span><br><span class="line">		n &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> B;</span><br><span class="line">&#125;</span><br><span class="line">ll n;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="function">mat <span class="title">A</span><span class="params">(<span class="number">3</span>, vec(<span class="number">3</span>))</span></span>;</span><br><span class="line">	A[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">2</span>; A[<span class="number">0</span>][<span class="number">1</span>] = <span class="number">1</span>; A[<span class="number">0</span>][<span class="number">2</span>] = <span class="number">0</span>;</span><br><span class="line">	A[<span class="number">1</span>][<span class="number">0</span>] = <span class="number">2</span>; A[<span class="number">1</span>][<span class="number">1</span>] = <span class="number">2</span>; A[<span class="number">1</span>][<span class="number">2</span>] = <span class="number">2</span>;</span><br><span class="line">	A[<span class="number">2</span>][<span class="number">0</span>] = <span class="number">0</span>; A[<span class="number">2</span>][<span class="number">1</span>] = <span class="number">1</span>; A[<span class="number">2</span>][<span class="number">2</span>] = <span class="number">2</span>;</span><br><span class="line">	A = <span class="built_in">pow</span>(A, n);</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; A[<span class="number">0</span>][<span class="number">0</span>] &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> round;</span><br><span class="line">	<span class="built_in">cin</span> &gt;&gt; round;</span><br><span class="line">	<span class="keyword">while</span> (round--)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">		solve();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


		  	  
	</div>



	<div class="article-categories">
	 
	</div>
	

	<div class="article-tags">
		
			<i class="iconfont icon-tags" style="margin-right:4px"></i>
			            
				<a class="link" href="/tags/矩阵的幂/">矩阵的幂</a>           
			
		
	</div>

	<div class="article-bottom">
		<a class="readmore" href="/2019/07/16/Blocks/">阅读更多</a> 	
	</div>	
    
</article>

	
	
	
	

<article class="article">		
	   
	<div class="article-header">
	    
		<a class="title" href="/2019/07/15/travel-saleman-problem/">Travel Salesman Problem</a>  
	       
		 

		<div class="meta">
			<time>Jul 15, 2019</time>			
		</div>
	</div>


	

    
	<div class="typo article-excerpt">	
		 
			<a id="more"></a>

<p><strong>思路：</strong></p>
<p>​        共有（n-1)！路径情况，NP难度问题</p>
<p>​        假设现在将已经访问过的顶点集合（顶点0当做还未访问）为S，当前所在顶点为v</p>
<p>​        dp[S][v] = min { dp[S U {u}][u] + d(v,u) | u不属于S}</p>
<p>​        状态压缩：数组下标为集合，编码一个整数或定义一个全序列关系并用二叉搜索树储存，        方便记忆搜索。对于集合，把每个元素选取与否对应到一个二进制位，从而把状态压缩        成一个整数。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ll long long</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> inf 1e9</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> max_n = <span class="number">15</span>;</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="keyword">int</span> d[max_n][max_n];<span class="comment">//从v点出发访问剩余所有的点，v-&gt;u(u不属于s)</span></span><br><span class="line"><span class="keyword">int</span> dp[<span class="number">1</span> &lt;&lt; max_n][max_n];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">rec</span><span class="params">(<span class="keyword">int</span> S, <span class="keyword">int</span> v)</span> </span>&#123;</span><br><span class="line"><span class="comment">//已经访问过的节点集合为S，当前位置为v</span></span><br><span class="line">	<span class="keyword">if</span> (dp[S][v] &gt;= <span class="number">0</span>)</span><br><span class="line">		<span class="keyword">return</span> dp[S][v];</span><br><span class="line">	<span class="keyword">if</span> (S == (<span class="number">1</span> &lt;&lt; n) - <span class="number">1</span> &amp;&amp; v == <span class="number">0</span>)</span><br><span class="line">		<span class="keyword">return</span> dp[S][v] = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">int</span> res = inf;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> u = <span class="number">0</span>; u &lt; n; u++) &#123;</span><br><span class="line">		<span class="keyword">if</span> (!(S &gt;&gt; u &amp; <span class="number">1</span>))</span><br><span class="line">            	res = min(res, rec(S | <span class="number">1</span> &lt;&lt; u, u) + d[v][u]);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> dp[S][v] = res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve_rec</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="built_in">memset</span>(dp, <span class="number">-1</span>, <span class="keyword">sizeof</span>(dp));</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; rec(<span class="number">0</span>, <span class="number">0</span>) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve_dp</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> S = <span class="number">0</span>; S &lt; <span class="number">1</span> &lt;&lt; n; S++)</span><br><span class="line">		fill(dp[S], dp[S] + n,inf);</span><br><span class="line">	dp[(<span class="number">1</span> &lt;&lt; n) - <span class="number">1</span>][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> S = (<span class="number">1</span> &lt;&lt; n) - <span class="number">2</span>; S &gt;= <span class="number">0</span>; S--)</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> v = <span class="number">0</span>; v &lt; n; v++)</span><br><span class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> u = <span class="number">0</span>; u &lt; n; u++)</span><br><span class="line">				<span class="keyword">if</span> (!(S &gt;&gt; u &amp; <span class="number">1</span>))</span><br><span class="line">					dp[S][v] = min(dp[S][v], dp[(<span class="number">1</span> &lt;&lt; u) | S][u] + d[v][u]);</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; dp[<span class="number">0</span>][<span class="number">0</span>] &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">	<span class="keyword">int</span> m = <span class="number">8</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= <span class="number">6</span>; i++)</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt;= <span class="number">6</span>; j++)</span><br><span class="line">			d[i][j] =inf;</span><br><span class="line">	<span class="keyword">while</span> (m--) &#123;</span><br><span class="line">		<span class="keyword">int</span> from, to, cost;</span><br><span class="line">		<span class="built_in">cin</span> &gt;&gt; from &gt;&gt; to &gt;&gt; cost;</span><br><span class="line">		d[from][to] = cost;</span><br><span class="line">	&#125;</span><br><span class="line">	solve_rec();</span><br><span class="line">    solve_dp();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;<span class="comment">/*</span></span><br><span class="line"><span class="comment">测试数据：</span></span><br><span class="line"><span class="comment">5</span></span><br><span class="line"><span class="comment">0 1 3</span></span><br><span class="line"><span class="comment">1 2 5</span></span><br><span class="line"><span class="comment">2 0 4</span></span><br><span class="line"><span class="comment">2 3 5</span></span><br><span class="line"><span class="comment">3 4 3</span></span><br><span class="line"><span class="comment">4 0 7</span></span><br><span class="line"><span class="comment">0 3 4</span></span><br><span class="line"><span class="comment">4 1 6*/</span></span><br></pre></td></tr></table></figure>

<p>​        </p>

		  	  
	</div>



	<div class="article-categories">
	 
	</div>
	

	<div class="article-tags">
		
			<i class="iconfont icon-tags" style="margin-right:4px"></i>
			            
				<a class="link" href="/tags/状态压缩DP/">状态压缩DP</a>           
			
		
	</div>

	<div class="article-bottom">
		<a class="readmore" href="/2019/07/15/travel-saleman-problem/">阅读更多</a> 	
	</div>	
    
</article>

	
	

	
	

	

    <script type="text/x-mathjax-config">
        var post = document.getElementsByClassName("post")[0];  
        MathJax.Hub.Config({
            showProcessingMessages: false,
            messageStyle: "none",    
            tex2jax: {
                inlineMath:  [ ["$", "$"] , ["\\(","\\)"]],
                displayMath: [ ["$$","$$"] , ["\\[","\\]"]],
                skipTags: ['script', 'noscript', 'style', 'textarea', 'pre','code','a'],
            },
            "HTML-CSS": {            
                showMathMenu: false
            }
        });
        MathJax.Hub.Queue(["Typeset",MathJax.Hub,post]);
    </script>
    <style>.MathJax{outline:0;}</style>

    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.2/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
 
</div>
          </div> 
      </div>            
    
        <i id="toTop" class="iconfont icon-backtotop"></i>

  
    <div class="none" id="search">
    <div class="header">
        <input type="text" placeholder="输入你想搜索的" id="search-input" class="input">
        
        <i id="search-cancel" class="iconfont icon-cancel"></i>
    </div>

    <div id="search-result" class="result"></div>
</div>
     <div class="mobile-menu">      

      
      <img class="mobile-menu-icon lazyload" src="/images/placeholder.png" data-src="/images/favicon.png">  
      

         
            

            <a class="mobile-menu-link" href="/">首页
            </a>
            
         
            

            <a class="mobile-menu-link" href="/archives">归档
            </a>
            
         
            

            <a class="mobile-menu-link" href="/tags">标签
            </a>
            
         
            

            <a class="mobile-menu-link" href="/about">关于
            </a>
            
         
                          

            <a class="mobile-menu-link mobile-menu-search" href="#">搜索 </a>                 
            
         
      
</div>
        
    



     
    


<footer class="footer">
	<div class="inner">
		<div class="copyright">
			&copy;
			
			2019
			Qinli

			<br>
			By <a href="https://hexo.io" target="_blank">Hexo</a> Theme <a href="https://github.com/Lemonreds/hexo-theme-Nayo" target="_blank">Nayo</a>
		</div>
	</div>
</footer>   

    <script src="/nayo.bundle.js"></script>           
  </body>        
</html>